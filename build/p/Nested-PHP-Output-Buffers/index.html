<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta charset="UTF-8">
	<meta name="author" content="Jarvis Badgley">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Nested PHP Output Buffers, or buffers within buffers :: Jarvis Badgley</title>
	<link rel='alternate' type='application/atom+xml' title='Atom 0.3' href='https://chipersoft.com/atom.xml'>
	<link rel="stylesheet" href="/css/main.css" type="text/css" media="screen" title="no title" charset="utf-8">
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,800,300' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Droid+Sans+Mono">
	<link rel="openid.server" href="http://openid.chipersoft.com/index.php">
	<link rel="openid.delegate" href="http://openid.chipersoft.com/index.php">
</head>
<body>
	<header class="navbar navbar-default navbar-static-top"><div class="container">
		<img class="logo visible-xs" src="/images/dexter.png" alt="">
		<div class="navbar-header">
			<a class="navbar-brand" href="/">Jarvis Badgley</a>
		</div>
		<ul class="nav navbar-nav">
			<li><a href="/about.html">Who Am I</a></li>
			<li><a href="/resume.html">Resume</a></li>
		</ul>
		<ul class="navbar-social">
			<li><a href="mailto:www@chipersoft.com"              ><img src="/images/social/email.png" width="48" height="48" alt="Email"></a></li>
			<li><a href="http://www.twitter.com/ChiperSoft"      ><img src="/images/social/twitter.png" width="48" height="48" alt="Twitter"></a></li>
			<li><a href="http://github.com/ChiperSoft"           ><img src="/images/social/github.png" width="48" height="48" alt="Github"></a></li>
			<li><a href="http://www.youtube.com/user/ChiperSoft" ><img src="/images/social/youtube.png" width="48" height="48" alt="Youtube"></a></li>
			<li><a href="http://www.last.fm/user/ChiperSoft"     ><img src="/images/social/lastfm.png" width="48" height="48" alt="Last.fm"></a></li>
			<li><a href="http://www.reddit.com/user/ChiperSoft"  ><img src="/images/social/reddit.png" width="48" height="48" alt="Reddit"></a></li>
			<li><a href="http://news.ycombinator.com/user?id=ChiperSoft"><img src="/images/social/hackernews.png" width="48" height="48" alt="Hacker News"></a></li>
			<li><a href="http://stackoverflow.com/users/110189/chipersoft"><img src="/images/social/stackoverflow.png" width="48" height="48" alt="StackOverflow"></a></li>
			<li><a href="http://www.quora.com/Jarvis-Badgley"    ><img src="/images/social/quora.png" width="48" height="48" alt="Quora"></a></li>
			<li><a href="http://www.facebook.com/ChiperSoft"     ><img src="/images/social/facebook.png" width="48" height="48" alt="Facebook"></a></li>
			<li><a href="https://plus.google.com/111290008413204402077"><img src="/images/social/google.png" width="48" height="48" alt="Google Plus"></a></li>
		</ul>
	</div></header>
	<div class="container content">
		
			<div class="row">
				<div class="col-sm-8 article-body">
		<article>
			<div class="page-header">
				<h1 class="post-title">
				<a href="/p/Nested-PHP-Output-Buffers">Nested PHP Output Buffers, or buffers within buffers</a>
					<small class="post-date">March 23rd, 2012</small>
				</h1>
			</div>
			<div class="post-content"><p>One of PHP&#39;s core features (although some call it a weakness) is that all code resides within a natural HTML document. Thusly, anything echoed by PHP and anything outside of the <code>&lt;?php ?&gt;</code> tag gets sent to the browser.  Well sometimes you don&#39;t WANT everything to be immediately sent to the browser, such as when you&#39;re parsing a PHP based template that needs to go into an email.  This is where the <a href="http://www.php.net/manual/en/ref.outcontrol.php">output buffer functions</a> become useful.</p>
<p>Calling <a href="http://www.php.net/manual/en/function.ob-start.php"><code>ob_start()</code></a> at any point in your code will create an output buffer, and anything that is outputted from that point on will be stored in that buffer.  You can then send the buffer&#39;s contents to a variable, clear the contents entirely, and/or send them to the browser.  You can even use the output buffer to <a href="http://www.php.net/manual/en/function.ob-gzhandler.php">gzip the page contents</a>.</p>
<p>One of the things that the documentation doesn&#39;t really cover, however, is what happens if you create a buffer while already inside a buffer.  My google searches to this affect didn&#39;t return anything useful, so I ran the following test:</p>
<pre><code>echo &#39;1&#39;;
ob_start();
    echo &#39;2&#39;;
    ob_start();
        echo &#39;3&#39;;
    $var_b = ob_get_clean();
    echo &#39;4&#39;;
$var_a = ob_get_clean();
echo &#39;5&#39;;

echo &quot;\n&quot;,$var_a,&quot;\n&quot;,$var_b;
</code></pre><p>And received these results:</p>
<pre><code>15
24
3
</code></pre><p>My conclusions: output buffers are stacked.  When you call <code>ob_start()</code>, a buffer is pushed onto the stack, and when you call <code>ob_end_clean()</code>, <code>ob_end_flush()</code>, or <code>ob_get_clean()</code> the buffer is popped back off of that stack.  Only the top most buffer receives code output.</p>
</div>
		</article>
	</div>
				<aside class="col-sm-4 col-md-3 col-md-offset-1 article-sidebar">
				
					<img class="logo hidden-xs" src="/images/dexter.png" alt="">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">Previous Posts</h3>
						</div>
						<ul class="panel-body article-links">
							
							<li><a href="/p/inheritance">You Don&#x27;t Know Inheritance</a> <span>September 11th, 2014</span></li>
							
							<li><a href="/p/profound-pratchett">The Profoundness of Terry Pratchett</a> <span>August 24th, 2014</span></li>
							
							<li><a href="/p/Deathspirals">Death spirals.</a> <span>June 2nd, 2014</span></li>
							
							<li><a href="/p/backbonejs">An introduction to Backbone.js, as annotated source code.</a> <span>May 23rd, 2014</span></li>
							
							<li><a href="/p/Bigotry">On bigotry, Brandon Eich, and keeping one&#x27;s mouth shut.</a> <span>April 3rd, 2014</span></li>
							
							<li><a href="/p/tool-weilding-workmen">The tool wielding workmen of Software Development</a> <span>March 4th, 2014</span></li>
							
							<li><a href="/p/public-education">On public education.</a> <span>February 14th, 2014</span></li>
							
							<li><a href="/p/toothbrushing">How changing what bathroom we kept the toothbrush in made me better at oral hygine</a> <span>January 4th, 2014</span></li>
							
						</ul>
						<ul class="panel-body article-links collapse" id="more-links">
							
							<li><a href="/p/phonelines">Landline Abandonment</a> <span>December 3rd, 2013</span></li>
							
							<li><a href="/p/MySQL-via-Memcache">Introduction to using MySQL as a NoSQL store via Memcache</a> <span>May 25th, 2013</span></li>
							
							<li><a href="/p/I-Promise-You-Will-Learn-Something">I Promise You&#x27;ll Learn Something</a> <span>April 15th, 2013</span></li>
							
							<li><a href="/p/JurassicPark">In which I rave about Jurassic Park</a> <span>April 13th, 2013</span></li>
							
							<li><a href="/p/I-Dont-Care-About-Your-Culture">I Don&#x27;t Care About Your Culture</a> <span>March 29th, 2013</span></li>
							
							<li><a href="/p/Birch-Beers">In pursuit of the perfect Birch Beer</a> <span>August 31st, 2012</span></li>
							
							<li><a href="/p/Lets-make-a-language">Lets Make A Language</a> <span>July 10th, 2012</span></li>
							
							<li><a href="/p/TwitterMostFollowed">TwitterMostFollowed</a> <span>June 15th, 2012</span></li>
							
							<li><a href="/p/PHP-many-meanings-of-static">PHP, The many meanings of static.</a> <span>April 19th, 2012</span></li>
							
							<li><a href="/p/Keep-it-simple-SOLIDs">Keep it simple, SOLIDs!</a> <span>March 24th, 2012</span></li>
							
							<li><a href="/p/Nested-PHP-Output-Buffers">Nested PHP Output Buffers, or buffers within buffers</a> <span>March 23rd, 2012</span></li>
							
							<li><a href="/p/PHP-on-nginx-vs-apache">PHP on Nginx vs Apache.</a> <span>March 4th, 2012</span></li>
							
							<li><a href="/p/Setting-up-a-LAMP-server-ubuntu">Setting up a LAMP server with Ubuntu, Apache, MySQL, mod_php, phpMyAdmin and PrimalPHP</a> <span>March 3rd, 2012</span></li>
							
							<li><a href="/p/Setting-up-a-LEMP-server-ubuntu">Setting up a LEMP server with Ubuntu, Nginx, MySQL, PHP-FPM, phpMyAdmin and PrimalPHP</a> <span>March 2nd, 2012</span></li>
							
							<li><a href="/p/why-I-still-prefer-prototype">Why I STILL prefer Prototype over jQuery</a> <span>February 24th, 2012</span></li>
							
							<li><a href="/p/HTTP">HTTP</a> <span>February 24th, 2012</span></li>
							
							<li><a href="/p/Testing-iPad-web-app-layout">Testing iPad Web App Layouts</a> <span>February 22nd, 2012</span></li>
							
							<li><a href="/p/The-Old-Republic">The Old Republic</a> <span>January 16th, 2012</span></li>
							
							<li><a href="/p/In-the-Wake-of-the-Dark">In the Wake of the Dark</a> <span>September 9th, 2011</span></li>
							
							<li><a href="/p/Testing-websites-in-IE9-on-mac">Testing websites in IE7 / IE8 / IE9 on a Mac</a> <span>August 19th, 2011</span></li>
							
							<li><a href="/p/on-source-control">Source Control</a> <span>August 4th, 2011</span></li>
							
							<li><a href="/p/on-world-of-warcraft-and-breaks-taken">On World of Warcraft... and breaks taken.</a> <span>July 24th, 2011</span></li>
							
							<li><a href="/p/on-code-commenting">On Code Commenting, Documentation, and Modularization</a> <span>May 27th, 2011</span></li>
							
							<li><a href="/p/pinscroll">PinScroll - Easy document content marking on the scrollbar</a> <span>August 20th, 2010</span></li>
							
							<li><a href="/p/reddit-superhide">Reddit SuperHide Safari Extension</a> <span>June 14th, 2010</span></li>
							
							<li><a href="/p/redditchecker">RedditChecker Safari Extension</a> <span>June 9th, 2010</span></li>
							
						</ul>
						<a href="#more-links" data-toggle="collapse" data-target="#more-links" class="more-toggle">View More</a>
					</div>

					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">Latest Projects</h3>
						</div>
						<ul class="panel-body project-links">
							<li><a href="http://mash.li">Mash.li</a><span>A SoundCloud aggregate for finding music mashups</span></li>
							<li><a href="http://queryizejs.com">Queryize</a><span>A no-frills chainable interface for building MySQL queries programmatically.</span></li>
							<li><a href="https://github.com/ChiperSoft/InterviewThis">InterviewThis</a><span>An open source list of developer questions to ask prospective employers during interviews</span></li>
							<li><a href="https://kalendaejs.com">Kalendae</a><span>A framework agnostic javascript date picker that just works.</span></li>
						</ul>
					</div>
				
				</aside>
			</div>
		
	</div>
	<hr>
	<footer class="container">Copyright &copy;  2015 Jarvis Badgley<br><a href="https://github.com/ChiperSoft/chipersoft.com">Generated</a> on 01/07/2015 at 10:05:11 and <a href="https://github.com/ChiperSoft/chipersoft.github.com">hosted by Github Pages</a></footer>

	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js"></script>
	
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-4767790-2', 'chipersoft.com');
	  ga('send', 'pageview');
	</script>
</body>
</html>